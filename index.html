<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>هل ستنجو في TWD؟</title>
<style>
  :root{
    --bg:#0f1115; --card:#14171b; --muted:#9aa3ad; --accent:#e85a4f;
    --glass: rgba(255,255,255,0.03);
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Tahoma,Arial,system-ui,sans-serif;background:var(--bg);color:#eef2f5;padding:16px}
  .wrap{max-width:920px;margin:0 auto}
  header{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}
  h1{margin:0;font-size:22px;color:var(--accent);text-align:center}
  p.lead{margin:0;text-align:center;color:var(--muted)}
  .card{background:linear-gradient(180deg,var(--card), #0f1316);border-radius:14px;padding:14px;margin:12px 0;box-shadow:0 6px 30px rgba(0,0,0,0.6)}
  label.field{display:block;margin-bottom:8px;font-size:14px;color:var(--muted)}
  input[type="text"]{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:var(--glass);color:inherit}
  .question{margin:14px 0;padding:12px;border-radius:10px;background:rgba(255,255,255,0.02)}
  .qtitle{font-weight:700;margin-bottom:8px}
  .opts{display:flex;flex-direction:column;gap:8px}
  .opt{padding:10px;border-radius:10px;background:transparent;border:1px solid rgba(255,255,255,0.03);cursor:pointer; transition:all .18s}
  .opt:hover{transform:translateY(-3px);background:rgba(255,255,255,0.02)}
  .opt input{margin-left:10px}
  .actions{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:12px}
  .btn{background:var(--accent);color:#fff;border:none;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:700}
  .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06)}
  #result{margin-top:16px;padding:14px;border-radius:12px;background:linear-gradient(180deg,#0f1418,#0b0d0f);display:none}
  #result h2{margin:6px 0;color:#ffd86b}
  .small{color:var(--muted);font-size:13px}
  .log{margin-top:12px}
  .log-item{padding:10px;border-radius:10px;background:rgba(255,255,255,0.02);margin-bottom:8px;display:flex;justify-content:space-between;gap:8px;align-items:center}
  .chip{background:#111;border-radius:999px;padding:6px 8px;color:var(--muted);font-size:12px}
  footer{margin-top:18px;text-align:center;color:var(--muted);font-size:13px}
  @media (min-width:720px){
    .row{display:flex;gap:12px}
    .col{flex:1}
  }
</style>
</head>
<body>
  <div class="wrap">
    <header class="card">
      <h1>هل ستنجو في TWD؟</h1>
      <p class="lead">اختبار سريع عن البقاء في TWD</p>
    </header>

    <div class="card">
      <label class="field">اسمك (سيظهر مع النتيجة):</label>
      <input id="playerName" type="text" placeholder="اكتب اسمك هنا (اختياري)" />
    </div>

    <form id="quizForm" class="card" autocomplete="off"></form>

    <div class="actions">
      <button id="calcBtn" class="btn">أظهر النتيجة</button>
      <button id="resetBtn" class="btn ghost" type="button">إعادة الاختبار</button>
      <button id="clearLogBtn" class="btn ghost" type="button">مسح السجل</button>
    </div>

    <div id="result" class="card" role="status" aria-live="polite"></div>

    <div id="logArea" class="card">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <strong>سجل نتائج المتسابقين (محلي)</strong>
        <span class="small">نتائج محفوظة على هذا المتصفح فقط</span>
      </div>
      <div id="logList" class="log"></div>
    </div>

    <footer>
      ملاحظة: هذا الاختبار للاستخدام الترفيهي فقط. السجل محلي على جهازك — لم يتم إرسال أي بيانات للخادم.
    </footer>
  </div>

<script>
/* === البيوت === */
const HOUSES = [
  { key: "ستارك", desc: "شريف وملتزم، يضع العائلة فوق كل شيء." },
  { key: "لانيستر", desc: "طموح وذكي، يسعى للنفوذ والمال." },
  { key: "تارغاريان", desc: "قوي وكاريزمي، يسعى للعرش بأي وسيلة." },
  { key: "براثيون", desc: "قوي واندفاعي، يحب القوة المباشرة." },
  { key: "غرايجوي", desc: "مغامر، يقدّر الحرية والسيطرة." },
  { key: "توللي", desc: "رحيم وحنون، يقدّم العائلة والمجتمع." }
];

/* === الأسئلة (11) === */
const QUESTIONS = [
  { q: "لو انضممت لمدينة جديدة شو رح تعمل؟", opts: [
    { text: "أراقب الناس وأختار بعناية.", houses:["ستارك","توللي"] },
    { text: "أتودد للأقوياء فورًا.", houses:["لانيستر","براثيون"] },
    { text: "أكسب ثقة العامة بسرعة.", houses:["تارغاريان","ستارك"] },
    { text: "أفرض نفسي بالقوة.", houses:["براثيون","غرايجوي"] }
  ]},
  { q: "إذا اقترح مستشارك خطة خطيرة لكنها فعّالة، ماذا تفعل؟", opts: [
    { text: "أدرس النتائج بعناية.", houses:["ستارك","توللي"] },
    { text: "أوافق بشرط مصلحتي أولًا.", houses:["لانيستر"] },
    { text: "أنفذها لإثبات سلطتي.", houses:["تارغاريان","غرايجوي"] },
    { text: "أرفض لو فيها أذى واضح.", houses:["ستارك"] }
  ]},
  { q: "وجدت كنزًا في منطقة مهجورة — ماذا تفعل؟", opts: [
    { text: "أوزع على المحتاجين.", houses:["توللي","ستارك"] },
    { text: "أحتفظ به لمستقبلي.", houses:["لانيستر"] },
    { text: "أستخدمه لتجميع قوة.", houses:["تارغاريان","براثيون"] },
    { text: "أبيعه لكسب نفوذ.", houses:["لانيستر","غرايجوي"] }
  ]},
  { q: "خانك حليف قديم — كيف تتصرف؟", opts: [
    { text: "أحاول فهم السبب.", houses:["ستارك"] },
    { text: "أبتزّه بالدليل.", houses:["لانيستر"] },
    { text: "أواجهه علنًا وأسحب سلطته.", houses:["براثيون"] },
    { text: "أنتقم بمكيدة محكمة.", houses:["تارغاريان","غرايجوي"] }
  ]},
  { q: "كيف تود أن يُذكر اسمك بعد موتك؟", opts: [
    { text: "حافظ على العدل والأمان.", houses:["ستارك"] },
    { text: "جمع الثروة والنفوذ.", houses:["لانيستر"] },
    { text: "قائد قوي أعاد الهيبة.", houses:["تارغاريان","براثيون"] },
    { text: "ذكي انتصر بدهائه.", houses:["غرايجوي","لانيستر"] }
  ]},
  { q: "إذا واجهت جيشًا أكبر منك بكثير، شو رح تعمل؟", opts: [
    { text: "أبحث عن تحالفات سلمية.", houses:["توللي","ستارك"] },
    { text: "أدفع لتجميع قوة.", houses:["لانيستر"] },
    { text: "أستخدم الخداع والمفاجأة.", houses:["غرايجوي"] },
    { text: "أحرق الأرض لزرع الخوف.", houses:["تارغاريان","براثيون"] }
  ]},
  { q: "شخص ضعيف يطلب مساعدتك علنًا — ماذا تفعل؟", opts: [
    { text: "أساعده دون حساب.", houses:["ستارك","توللي"] },
    { text: "أساعد بشرط معروف لاحق.", houses:["لانيستر"] },
    { text: "أستغله كغطاء لخطة.", houses:["غرايجوي","لانيستر"] },
    { text: "أتجاهله أو أضعه تحت سلطتي.", houses:["براثيون","تارغاريان"] }
  ]},
  { q: "شخص ظالم محبوب من العامة — كيف تتصرف؟", opts: [
    { text: "أحاول تغييره بالحجة.", houses:["ستارك"] },
    { text: "أستغل شعبيته لنفعي.", houses:["لانيستر","غرايجوي"] },
    { text: "أفضحه بطريقة مدروسة.", houses:["توللي"] },
    { text: "أطيحه بخطة قاسية.", houses:["تارغاريان","براثيون"] }
  ]},
  { q: "ما الذي يدفعك لاتخاذ قرار خطير عادةً؟", opts: [
    { text: "المصلحة العامة والخوف من الفوضى.", houses:["ستارك","توللي"] },
    { text: "الحفاظ على المال والعائلة.", houses:["لانيستر"] },
    { text: "طموحي لرفع منزلتي.", houses:["تارغاريان"] },
    { text: "إثبات قوتي بأي طريقة.", houses:["براثيون","غرايجوي"] }
  ]},
  { q: "لو مطلوب خيار بين إنقاذ صديق أو إنقاذ مدينة، ماذا تختار؟", opts: [
    { text: "أحمي المدينة مهما كان.", houses:["ستارك"] },
    { text: "أنقذ صديقي لمصلحتي.", houses:["لانيستر"] },
    { text: "أحاول إنقاذ الاثنين.", houses:["توللي"] },
    { text: "أختار الصديق دائمًا.", houses:["براثيون","غرايجوي"] }
  ]},
  { q: "عندك تجربة مؤلمة من الماضي — كيف تؤثر فيك الآن؟", opts: [
    { text: "أتعلم منها وأتجنب الأخطاء.", houses:["ستارك"] },
    { text: "تحفزني لجمع النفوذ.", houses:["لانيستر"] },
    { text: "أخطط ببرود للانتقام.", houses:["تارغاريان","غرايجوي"] },
    { text: "أبتعد عن الناس وأبقى قويًا.", houses:["براثيون"] }
  ]}
];

/* === بناء الأسئلة === */
function renderQuiz(){
  const quizForm = document.getElementById("quizForm");
  quizForm.innerHTML = "";
  QUESTIONS.forEach((item, idx) => {
    const qDiv = document.createElement("div");
    qDiv.className = "question";
    const title = document.createElement("div");
    title.className = "qtitle";
    title.textContent = `${idx+1}. ${item.q}`;
    qDiv.appendChild(title);

    const optsWrap = document.createElement("div");
    optsWrap.className = "opts";
    item.opts.forEach((opt, oi) => {
      const id = `q${idx}_opt${oi}`;
      const lab = document.createElement("label");
      lab.className = "opt";
      lab.innerHTML = `<input type="radio" name="q${idx}" data-houses="${opt.houses.join(",")}" /> <span>${opt.text}</span>`;
      lab.addEventListener("click", ()=>{ lab.querySelector("input").checked = true; });
      optsWrap.appendChild(lab);
    });
    qDiv.appendChild(optsWrap);
    quizForm.appendChild(qDiv);
  });
}

/* === حساب النتيجة === */
function calculateResult(){
  const answers = [];
  for(let i=0;i<QUESTIONS.length;i++){
    const sel = document.querySelector(`input[name="q${i}"]:checked`);
    if(!sel){ alert(`رجاءً جاوب على السؤال ${i+1}`); return; }
    answers.push(sel);
  }

  const counts = {};
  HOUSES.forEach(h=>counts[h.key]=0);

  answers.forEach(inp=>{
    const hs = inp.dataset.houses.split(",");
    hs.forEach(h=>{
      if(h in counts) counts[h]++;
    });
  });

  let topHouse = null, topVal=-1;
  Object.entries(counts).forEach(([k,v])=>{
    if(v>topVal){ topVal=v; topHouse=k; }
  });

  const name = (document.getElementById("playerName").value || "مجهول").trim();
  const houseObj = HOUSES.find(h=>h.key===topHouse);
  const desc = houseObj? houseObj.desc : "";

  let html = `<h2>${name} — ${topHouse}</h2>
    <p class="small">مفاجأة! الاختبار الحقيقي كان لمعرفة بيتك في Game of Thrones.</p>
    <p><strong>البيت الأقرب لك:</strong> ${topHouse}</p>
    <p class="small">${desc}</p>`;

  document.getElementById("result").innerHTML = html;
  document.getElementById("result").style.display="block";
}

/* === أحداث === */
document.getElementById("calcBtn").addEventListener("click", e=>{
  e.preventDefault();
  calculateResult();
});
document.getElementById("resetBtn").addEventListener("click", ()=>{
  document.getElementById("playerName").value="";
  renderQuiz();
  document.getElementById("result").style.display="none";
});

/* تهيئة */
renderQuiz();
</script>
</body>
</html>
